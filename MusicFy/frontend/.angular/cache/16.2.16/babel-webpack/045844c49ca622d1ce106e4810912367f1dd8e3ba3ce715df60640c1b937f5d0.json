{"ast":null,"code":"import { FormControl } from '@angular/forms';\nimport { debounceTime, distinctUntilChanged, switchMap, catchError } from 'rxjs/operators';\nimport { of } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/search.service\";\nimport * as i2 from \"@angular/router\";\nexport let SearchComponent = /*#__PURE__*/(() => {\n  class SearchComponent {\n    constructor(searchService, route, router) {\n      this.searchService = searchService;\n      this.route = route;\n      this.router = router;\n      this.searchControl = new FormControl('');\n      this.searchResults = null;\n      this.loading = false;\n      this.error = null;\n      this.noResults = false;\n    }\n    ngOnInit() {\n      // Check for query parameter in URL\n      this.route.queryParams.subscribe(params => {\n        const query = params['q'];\n        if (query) {\n          this.searchControl.setValue(query);\n          this.performSearch(query);\n        }\n      });\n      // Setup search as user types\n      this.searchControl.valueChanges.pipe(debounceTime(300), distinctUntilChanged(), switchMap(query => {\n        if (!query || query.trim().length < 2) {\n          this.searchResults = null;\n          this.noResults = false;\n          this.error = null;\n          return of(null);\n        }\n        this.loading = true;\n        this.error = null;\n        // Update URL with search query\n        this.router.navigate([], {\n          relativeTo: this.route,\n          queryParams: {\n            q: query\n          },\n          queryParamsHandling: 'merge'\n        });\n        return this.searchService.search(query).pipe(catchError(err => {\n          console.error('Search error:', err);\n          this.error = 'An error occurred while searching. Please try again.';\n          this.loading = false;\n          return of(null);\n        }));\n      })).subscribe(results => {\n        this.loading = false;\n        if (results) {\n          this.searchResults = results;\n          this.noResults = !results.songs.length && !results.albums.length && !results.artists.length;\n        }\n      });\n    }\n    performSearch(query) {\n      if (!query || query.trim().length < 2) {\n        return;\n      }\n      this.loading = true;\n      this.error = null;\n      this.searchService.search(query).subscribe({\n        next: results => {\n          this.searchResults = results;\n          this.noResults = !results.songs.length && !results.albums.length && !results.artists.length;\n          this.loading = false;\n        },\n        error: err => {\n          console.error('Search error:', err);\n          this.error = 'An error occurred while searching. Please try again.';\n          this.loading = false;\n        }\n      });\n    }\n    clearSearch() {\n      this.searchControl.setValue('');\n      this.searchResults = null;\n      this.noResults = false;\n      this.router.navigate([], {\n        relativeTo: this.route,\n        queryParams: {\n          q: null\n        },\n        queryParamsHandling: 'merge'\n      });\n    }\n    static {\n      this.ɵfac = function SearchComponent_Factory(t) {\n        return new (t || SearchComponent)(i0.ɵɵdirectiveInject(i1.SearchService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: SearchComponent,\n        selectors: [[\"app-search\"]],\n        decls: 48,\n        vars: 0,\n        consts: [[1, \"search-page\"], [1, \"page-header\"], [1, \"subtitle\"], [1, \"search-box\"], [\"type\", \"text\", \"placeholder\", \"Search artists or albums...\", 1, \"search-input\"], [1, \"search-button\"], [1, \"search-icon\"], [1, \"loading\", 2, \"display\", \"none\"], [1, \"spinner\"], [1, \"error-message\", 2, \"display\", \"none\"], [1, \"error-icon\"], [1, \"no-results\", 2, \"display\", \"none\"], [1, \"no-results-icon\"], [1, \"results-section\"], [1, \"section-title\"], [1, \"artist-grid\"], [1, \"artist-card\"], [1, \"artist-image\"], [\"src\", \"artist.jpg\", \"alt\", \"Artist\", \"onerror\", \"this.style.display='none'\"], [1, \"placeholder-icon\"], [1, \"artist-name\"], [1, \"album-grid\"], [1, \"album-card\"], [1, \"album-image\"], [\"src\", \"album.jpg\", \"alt\", \"Album\", \"onerror\", \"this.style.display='none'\"], [1, \"album-title\"], [1, \"album-artist\"]],\n        template: function SearchComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"header\", 1)(2, \"h1\");\n            i0.ɵɵtext(3, \"Music Search\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"p\", 2);\n            i0.ɵɵtext(5, \"Find your favorite artists and albums\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(6, \"div\", 3);\n            i0.ɵɵelement(7, \"input\", 4);\n            i0.ɵɵelementStart(8, \"button\", 5)(9, \"i\", 6);\n            i0.ɵɵtext(10, \"search\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(11, \"div\", 7);\n            i0.ɵɵelement(12, \"div\", 8);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"div\", 9)(14, \"div\", 10);\n            i0.ɵɵtext(15, \"error\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"p\");\n            i0.ɵɵtext(17, \"Something went wrong. Please try again.\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(18, \"div\", 11)(19, \"div\", 12);\n            i0.ɵɵtext(20, \"search_off\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(21, \"h3\");\n            i0.ɵɵtext(22, \"No results found\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(23, \"p\");\n            i0.ɵɵtext(24, \"Try different search terms\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(25, \"section\", 13)(26, \"h2\", 14);\n            i0.ɵɵtext(27, \"Artists\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(28, \"div\", 15)(29, \"div\", 16)(30, \"div\", 17);\n            i0.ɵɵelement(31, \"img\", 18);\n            i0.ɵɵelementStart(32, \"div\", 19);\n            i0.ɵɵtext(33, \"person\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(34, \"h3\", 20);\n            i0.ɵɵtext(35, \"Artist Name\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(36, \"h2\", 14);\n            i0.ɵɵtext(37, \"Albums\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(38, \"div\", 21)(39, \"div\", 22)(40, \"div\", 23);\n            i0.ɵɵelement(41, \"img\", 24);\n            i0.ɵɵelementStart(42, \"div\", 19);\n            i0.ɵɵtext(43, \"album\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(44, \"h3\", 25);\n            i0.ɵɵtext(45, \"Album Title\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(46, \"p\", 26);\n            i0.ɵɵtext(47, \"Artist Name\");\n            i0.ɵɵelementEnd()()()()();\n          }\n        },\n        styles: [\".search-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:0 15px}.search-header[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.search-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;color:#4b3f72;margin-bottom:10px}.search-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6247aa;font-size:1.1rem}.search-form[_ngcontent-%COMP%]{margin-bottom:30px}.search-form[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%}.search-form[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{margin:0 auto;max-width:600px;border-top:3px solid #6247aa;box-shadow:0 4px 15px #6247aa26}.search-form[_ngcontent-%COMP%]     .mat-mdc-form-field-focus-overlay{background-color:#6247aa0d}.search-form[_ngcontent-%COMP%]     .mat-mdc-form-field-ripple{background-color:#6247aa}.search-form[_ngcontent-%COMP%]     .mat-mdc-form-field-icon-prefix>.mat-icon{color:#6247aa}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:40px 0}.loading-container[_ngcontent-%COMP%]     .mat-progress-spinner circle{stroke:#6247aa!important}.error-container[_ngcontent-%COMP%]{margin:20px 0;color:#f44336;text-align:center}.error-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{border-left:4px solid #f44336}.no-results[_ngcontent-%COMP%]{text-align:center;padding:40px 0;color:#4b3f72}.no-results[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:60px;width:60px;height:60px;margin-bottom:15px;color:#8e7cc3}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:10px}.no-results[_ngcontent-%COMP%]   .suggestion[_ngcontent-%COMP%]{color:#6247aa;font-size:1rem;opacity:.7}.search-results[_ngcontent-%COMP%]{margin-top:20px}.result-section[_ngcontent-%COMP%]{margin-bottom:40px}.result-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#4b3f72;margin-bottom:20px;padding-bottom:8px;border-bottom:2px solid #d1c6e9}.artists-grid[_ngcontent-%COMP%], .albums-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:20px}.artist-card[_ngcontent-%COMP%], .album-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .3s ease,box-shadow .3s ease;border-top:3px solid #6247aa}.artist-card[_ngcontent-%COMP%]:hover, .album-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #6247aa33}.artist-image[_ngcontent-%COMP%], .album-image[_ngcontent-%COMP%]{height:160px;display:flex;justify-content:center;align-items:center;background-color:#f5f5f5;overflow:hidden}.placeholder-icon[_ngcontent-%COMP%]{font-size:50px;width:50px;height:50px;color:#8e7cc3}.artist-img[_ngcontent-%COMP%], .album-img[_ngcontent-%COMP%]{width:100%;height:100%;background-size:cover;background-position:center}.artist-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .album-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;margin:8px 0 5px;color:#4b3f72}.album-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6247aa;font-size:.9rem;opacity:.8}  .mat-mdc-list-item:hover{background-color:#6247aa0d}  .mat-mdc-list-item .mat-icon{color:#6247aa}  .mat-mdc-list-item .mdc-list-item__primary-text{color:#4b3f72}@media (max-width: 768px){.artists-grid[_ngcontent-%COMP%], .albums-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:15px}.artist-image[_ngcontent-%COMP%], .album-image[_ngcontent-%COMP%]{height:140px}}\"]\n      });\n    }\n  }\n  return SearchComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}